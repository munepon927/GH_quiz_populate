<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Grasshopper åŸºç¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ã‚¯ã‚¤ã‚º â€” JSONç‰ˆ</title>
<style>
  body{margin:0;background:#0b1020;color:#e9eef9;font-family:"Inter","Segoe UI",system-ui,-apple-system,Roboto,"Helvetica Neue",Arial,"Noto Sans JP",sans-serif}
  header{padding:16px;border-bottom:1px solid #223;background:rgba(11,16,32,.85);backdrop-filter:blur(6px)}
  header h1{margin:0;font-size:20px;font-weight:800}
  .wrap{max-width:1200px;margin:0 auto;padding:20px;display:grid;grid-template-columns:1fr 340px;gap:16px}
  @media(max-width:1000px){.wrap{grid-template-columns:1fr}}
  .card{background:#12182b;border:1px solid #1b2238;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .quiz{padding:20px}
  .choice{display:block;background:#0f1530;border:1px solid #223159;color:#e9eef9;border-radius:12px;padding:14px;margin-top:8px;cursor:pointer}
  .choice.correct{border-color:#82e0aa;box-shadow:inset 0 0 0 1px #82e0aa}
  .choice.wrong{border-color:#ff6b6b;box-shadow:inset 0 0 0 1px #ff6b6b}
  .btn{background:#4aa8ff;color:#00122b;border:none;border-radius:10px;padding:10px 14px;font-weight:800;cursor:pointer;margin-right:8px;margin-top:12px}
  .score{padding:16px}
  .apps{margin-top:14px;background:#0f1530;border:1px dashed #294;border-radius:12px;padding:12px}
  .apps-item{display:flex;gap:10px;margin-top:8px}
  .apps-item img{width:100px;border:1px solid #223159;border-radius:8px}
  .apps-item p{margin:0;color:#a9b3c9;font-size:13px}
</style>
</head>
<body>
<header>
  <h1>ğŸ§© Grasshopper åŸºç¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ ã‚¯ã‚¤ã‚º â€” JSONç‰ˆ</h1>
</header>
<div class="wrap">
  <section id="quizCard" class="card quiz">
    <h2 id="qTitle">èª­ã¿è¾¼ã¿ä¸­â€¦</h2>
    <img id="qImg" style="max-width:95%;border-radius:12px;display:none;margin:10px auto"/>
    <div id="choices"></div>
    <div id="explain" style="margin-top:12px;color:#a9b3c9;font-size:14px"></div>
    <div id="apps" class="apps" style="display:none">
      <h4>ğŸ’¡ ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ã„ã©ã“ã‚</h4>
      <div id="appsList"></div>
    </div>
    <button id="nextBtn" class="btn">æ¬¡ã¸</button>
  </section>
  <aside class="card score">
    <h3>ğŸ“Š æˆç¸¾</h3>
    <p id="scoreInfo">â€”</p>
  </aside>
</div>
<script>
let questions=[];let index=0;let correct=0;

async function loadQuestions(){
  try{
    const res=await fetch('questions.json?v=20251107');
    questions=await res.json();
    startQuiz();
  }catch(e){
    document.getElementById('qTitle').textContent='âŒ questions.json ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“';
  }
}

function startQuiz(){
  index=0;correct=0;
  renderQuestion();
}

function renderQuestion(){
  const q=questions[index];
  const qTitle=document.getElementById('qTitle');
  const qImg=document.getElementById('qImg');
  const choicesBox=document.getElementById('choices');
  const explain=document.getElementById('explain');
  const apps=document.getElementById('apps');
  const appsList=document.getElementById('appsList');
  qTitle.textContent=q.title;
  if(q.img){qImg.src=q.img;qImg.style.display='block';}else{qImg.style.display='none';}
  choicesBox.innerHTML='';
  q.choices.forEach(c=>{
    const b=document.createElement('button');b.className='choice';b.textContent=c;
    b.onclick=()=>{
      const isC=c===q.correct;if(isC)correct++;
      document.querySelectorAll('.choice').forEach(x=>x.disabled=true);
      b.classList.add(isC?'correct':'wrong');
      explain.innerHTML=(isC?'âœ… æ­£è§£ï¼':'âŒ ä¸æ­£è§£')+'<br>'+q.explain;
      if(isC&&q.apps){apps.style.display='block';appsList.innerHTML='';q.apps.forEach(a=>{const row=document.createElement('div');row.className='apps-item';row.innerHTML=`<img src="${a.img}"><p>${a.text}</p>`;appsList.appendChild(row);});}
      document.getElementById('nextBtn').disabled=false;
    };
    choicesBox.appendChild(b);
  });
  explain.textContent='';apps.style.display='none';document.getElementById('nextBtn').disabled=true;
}

document.getElementById('nextBtn').onclick=()=>{
  index++;
  if(index<questions.length){renderQuestion();}
  else{document.getElementById('qTitle').textContent='âœ… çµ‚äº†ï¼';document.getElementById('choices').innerHTML='';document.getElementById('qImg').style.display='none';document.getElementById('explain').textContent=`æˆç¸¾ï¼š${correct}/${questions.length}`;document.getElementById('apps').style.display='none';document.getElementById('scoreInfo').textContent=`æ­£è§£ç‡ ${(correct/questions.length*100).toFixed(0)}%`;}
};

loadQuestions();
</script>
</body>
</html>
